(()=>{var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(){}const n=e=>e;function r(e,t){for(const n in t)e[n]=t[n];return e}function l(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(l)}function i(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function u(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function d(e){return 0===Object.keys(e).length}function f(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function p(e){let t;return f(e,(e=>t=e))(),t}function m(e,t,n){e.$$.on_destroy.push(f(t,n))}function h(e,t,n,r){if(e){const l=$(e,t,n,r);return e[0](l)}}function $(e,t,n,l){return e[1]&&l?r(n.ctx.slice(),e[1](l(t))):n.ctx}function g(e,t,n,r){if(e[2]&&r){const l=e[2](r(n));if(void 0===t.dirty)return l;if("object"==typeof l){const e=[],n=Math.max(t.dirty.length,l.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|l[r];return e}return t.dirty|l}return t.dirty}function v(e,t,n,r,l,o){if(l){const s=$(t,n,r,o);e.p(s,l)}}function y(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function w(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function b(e){return null==e?"":e}function C(e,t,n){return e.set(n),t}function x(e){return e&&i(e.destroy)?e.destroy:t}const z="undefined"!=typeof window;let k=z?()=>window.performance.now():()=>Date.now(),L=z?e=>requestAnimationFrame(e):t;const E=new Set;function S(e){E.forEach((t=>{t.c(e)||(E.delete(t),t.f())})),0!==E.size&&L(S)}function F(e){let t;return 0===E.size&&L(S),{promise:new Promise((n=>{E.add(t={c:e,f:n})})),abort(){E.delete(t)}}}let D=!1;function _(e,t){e.appendChild(t)}function M(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function O(e){const t=N("style");return A(M(e),t),t.sheet}function A(e,t){return _(e.head||e,t),t.sheet}function q(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function H(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function P(){return B(" ")}function Q(){return B("")}function R(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Z(e){return function(t){return t.preventDefault(),e.call(this,t)}}function V(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function U(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function K(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:U(e,r,t[r])}function J(e,t){for(const n in t)U(e,n,t[n])}function W(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function I(e,t){e.value=null==t?"":t}function Y(e,t,n){e.classList[n?"add":"remove"](t)}function G(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,r,t),l}const X=new Map;let ee,te=0;function ne(e,t,n,r,l,o,s,i=0){const c=16.666/r;let a="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*o(e);a+=100*e+`%{${s(r,1-r)}}\n`}const u=a+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${i}`,f=M(e),{stylesheet:p,rules:m}=X.get(f)||function(e,t){const n={stylesheet:O(t),rules:{}};return X.set(e,n),n}(f,e);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${r}ms linear ${l}ms 1 both`,te+=1,d}function re(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),l=n.length-r.length;l&&(e.style.animation=r.join(", "),te-=l,te||L((()=>{te||(X.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)})),X.clear())})))}function le(e){ee=e}function oe(){if(!ee)throw new Error("Function called outside component initialization");return ee}function se(){const e=oe();return(t,n,{cancelable:r=!1}={})=>{const l=e.$$.callbacks[t];if(l){const o=G(t,n,{cancelable:r});return l.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function ie(e,t){return oe().$$.context.set(e,t),t}function ce(e){return oe().$$.context.get(e)}const ae=[],ue=[],de=[],fe=[],pe=Promise.resolve();let me=!1;function he(){me||(me=!0,pe.then(we))}function $e(e){de.push(e)}const ge=new Set;let ve,ye=0;function we(){const e=ee;do{for(;ye<ae.length;){const e=ae[ye];ye++,le(e),be(e.$$)}for(le(null),ae.length=0,ye=0;ue.length;)ue.pop()();for(let e=0;e<de.length;e+=1){const t=de[e];ge.has(t)||(ge.add(t),t())}de.length=0}while(ae.length);for(;fe.length;)fe.pop()();me=!1,ge.clear(),le(e)}function be(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach($e)}}function Ce(){return ve||(ve=Promise.resolve(),ve.then((()=>{ve=null}))),ve}function xe(e,t,n){e.dispatchEvent(G(`${t?"intro":"outro"}${n}`))}const ze=new Set;let ke;function Le(){ke={r:0,c:[],p:ke}}function Ee(){ke.r||s(ke.c),ke=ke.p}function Se(e,t){e&&e.i&&(ze.delete(e),e.i(t))}function Fe(e,t,n,r){if(e&&e.o){if(ze.has(e))return;ze.add(e),ke.c.push((()=>{ze.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const De={duration:0};function _e(e,r,l,o){let c=r(e,l),a=o?0:1,u=null,d=null,f=null;function p(){f&&re(e,f)}function m(e,t){const n=e.b-a;return t*=Math.abs(n),{a:a,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(r){const{delay:l=0,duration:o=300,easing:i=n,tick:h=t,css:$}=c||De,g={start:k()+l,b:r};r||(g.group=ke,ke.r+=1),u||d?d=g:($&&(p(),f=ne(e,a,r,o,l,i,$)),r&&h(0,1),u=m(g,o),$e((()=>xe(e,r,"start"))),F((t=>{if(d&&t>d.start&&(u=m(d,o),d=null,xe(e,u.b,"start"),$&&(p(),f=ne(e,a,u.b,u.duration,0,i,c.css))),u)if(t>=u.end)h(a=u.b,1-a),xe(e,u.b,"end"),d||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;a=u.a+u.d*i(e/u.duration),h(a,1-a)}return!(!u&&!d)})))}return{run(e){i(c)?Ce().then((()=>{c=c(),h(e)})):h(e)},end(){p(),u=d=null}}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis;function Me(e,t){const n={},r={},l={$$scope:1};let o=e.length;for(;o--;){const s=e[o],i=t[o];if(i){for(const e in s)e in i||(r[e]=1);for(const e in i)l[e]||(n[e]=i[e],l[e]=1);e[o]=i}else for(const e in s)l[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let Oe;function Ae(e){e&&e.c()}function qe(e,t,n,r){const{fragment:o,on_mount:c,on_destroy:a,after_update:u}=e.$$;o&&o.m(t,n),r||$e((()=>{const t=c.map(l).filter(i);a?a.push(...t):s(t),e.$$.on_mount=[]})),u.forEach($e)}function je(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,n,r,l,i,c,a,u=[-1]){const d=ee;le(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let p=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...r)=>{const l=r.length?r[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=l)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](l),p&&function(e,t){-1===e.$$.dirty[0]&&(ae.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){D=!0;const e=(m=n.target,Array.from(m.childNodes));f.fragment&&f.fragment.l(e),e.forEach(j)}else f.fragment&&f.fragment.c();n.intro&&Se(e.$$.fragment),qe(e,n.target,n.anchor,n.customElement),D=!1,we()}var m;le(d)}"function"==typeof HTMLElement&&(Oe=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(l).filter(i);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){je(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class Ne{$destroy(){je(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function He(e){const t=e-1;return t*t*t+1}function Be(e,{delay:t=0,duration:n=400,easing:r=He,x:l=0,y:o=0,opacity:s=0}={}){const i=getComputedStyle(e),c=+i.opacity,a="none"===i.transform?"":i.transform,u=c*(1-s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${a} translate(${(1-e)*l}px, ${(1-e)*o}px);\n\t\t\topacity: ${c-u*t}`}}const Pe=[];function Qe(e,n=t){let r;const l=new Set;function o(t){if(c(e,t)&&(e=t,r)){const t=!Pe.length;for(const t of l)t[1](),Pe.push(t,e);if(t){for(let e=0;e<Pe.length;e+=2)Pe[e][0](Pe[e+1]);Pe.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,i=t){const c=[s,i];return l.add(c),1===l.size&&(r=n(o)||t),s(e),()=>{l.delete(c),0===l.size&&(r(),r=null)}}}}var Re=Object.defineProperty,Ze=(e,t,n)=>(((e,t,n)=>{t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);function Ve(e,t="outclick"){const n=n=>{e.contains(n.target)||e.dispatchEvent(new CustomEvent(t,{bubbles:"outclick"!==t}))};return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}}class Ue{constructor(e,t){Ze(this,"store"),Ze(this,"getState",(()=>p(this.store))),Ze(this,"setData",(e=>{this.store.update((t=>({...t,isLoading:!1,isSuccess:!0,data:"function"==typeof e?e(t.data):e})))})),Ze(this,"getData",(()=>this.getState().data));const n=()=>{if(this.getData())return;const n=e();var r;"object"==typeof(r=n)&&"function"==typeof r.then?n.then(this.setData).catch((e=>{var n;null==(n=t.onError)||n.call(t),this.store.update((e=>({...e,isLoading:!1,isSuccess:!1})))})):this.setData(n)};this.store=Qe({isSuccess:!1,isLoading:!1,data:void 0,refetch:n}),!1!==t.enabled&&n()}}class Ke{constructor(){Ze(this,"queries",new Map)}getQuery(e,t,n={}){return this.queries.has(e)||this.queries.set(e,new Ue(t,n)),this.queries.get(e)}setQueryData(e,t){const n=this.queries.get(e);n&&n.setData(t)}getQueryData(e){var t;return null==(t=this.queries.get(e))?void 0:t.getData()}getQueryState(e){const t=this.queries.get(e);return t?t.getState():{data:void 0,isLoading:!1,isSuccess:!1,refetch:()=>{}}}}function Je(e,t,n={}){return{subscribe:et().getQuery(e,t,n).store.subscribe}}function We(e,t={}){const n=n=>(r.update((e=>({...e,isLoading:!0}))),e(n).then((e=>{var n;return null==(n=t.onSuccess)||n.call(t,e),e})).catch((e=>{var n;throw null==(n=t.onError)||n.call(t,e),e})).finally((()=>{r.update((e=>({...e,isLoading:!1})))}))),r=Qe({isLoading:!1,mutate:e=>{n(e).catch((()=>null))},mutateAsync:n});return{subscribe:r.subscribe}}function Ie(e){let t;const n=e[2].default,r=h(n,e,e[1],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,[l]){r&&r.p&&(!t||2&l)&&v(r,n,e,e[1],t?g(n,e[1],l,null):y(e[1]),null)},i(e){t||(Se(r,e),t=!0)},o(e){Fe(r,e),t=!1},d(e){r&&r.d(e)}}}function Ye(e,t,n){let{$$slots:r={},$$scope:l}=t,{client:o}=t;return ie(Xe,o),e.$$set=e=>{"client"in e&&n(0,o=e.client),"$$scope"in e&&n(1,l=e.$$scope)},[o,l,r]}class Ge extends Ne{constructor(e){super(),Te(this,e,Ye,Ie,c,{client:0})}}const Xe=Symbol("queryClient");function et(){return ce(Xe)}function tt(e){let n,r,l;return{c(){n=N("div"),U(n,"class",r=b(`loader ${e[1].class}`)+" svelte-1cyki07"),U(n,"style",l=`--size:${e[0]}px`)},m(e,t){q(e,n,t)},p(e,[t]){2&t&&r!==(r=b(`loader ${e[1].class}`)+" svelte-1cyki07")&&U(n,"class",r),1&t&&l!==(l=`--size:${e[0]}px`)&&U(n,"style",l)},i:t,o:t,d(e){e&&j(n)}}}function nt(e,t,n){let{size:l=20}=t;return e.$$set=e=>{n(1,t=r(r({},t),w(e))),"size"in e&&n(0,l=e.size)},t=w(t),[l,t]}class rt extends Ne{constructor(e){super(),Te(this,e,nt,tt,c,{size:0})}}function lt(e){let n,l,o,s=[{width:"23"},{height:"23"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<s.length;e+=1)i=r(i,s[e]);return{c(){n=H("svg"),l=H("path"),o=H("path"),U(l,"d","M22.7 10.578c-.289-.29-.72-.578-1.152-.578H5.715c-.575 0-1.151.289-1.295.867L.102 20.977C-.186 21.845.102 23 1.397 23H17.23c.575 0 1.151-.289 1.295-.867l4.318-10.11c.288-.434.144-1.012-.144-1.445z"),U(l,"fill","currentColor"),U(o,"d","M1.754 9.814c.73-1.587 2.338-2.598 4.092-2.598H19V4.33c0-.866-.585-1.443-1.462-1.443H9.354L6.869.433C6.577.144 6.285 0 5.846 0H1.462C.585 0 0 .577 0 1.443V14l1.754-4.186z"),U(o,"fill","currentColor"),J(n,i)},m(e,t){q(e,n,t),_(n,l),_(n,o)},p(e,[t]){J(n,i=Me(s,[{width:"23"},{height:"23"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&t&&e[0]]))},i:t,o:t,d(e){e&&j(n)}}}function ot(e,t,n){return e.$$set=e=>{n(0,t=r(r({},t),w(e)))},[t=w(t)]}class st extends Ne{constructor(e){super(),Te(this,e,ot,lt,c,{})}}var it=(e=>(e[e.OK=200]="OK",e[e.Created=201]="Created",e[e.MultipleChoices=300]="MultipleChoices",e[e.NoContent=204]="NoContent",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.BadRequest=400]="BadRequest",e))(it||{});const ct={delete:"Delete",deleteConfirm:"Do you really want to delete this file ?",newFolderPlaceholder:"Folder name",deleteFolder:"Delete this folder",emptyTitle:"This folder is empty",emptyDescription:"Drop a file here to upload it",createFolder:"New folder",copy:"Copy link",size:"Size",filename:"Name",serverError:"Server error"},at={fr:{delete:"Supprimer",deleteConfirm:"Voulez vous vraiment supprimer ce fichier ?",newFolderPlaceholder:"Nom du dossier",emptyTitle:"Ce dossier est vide",deleteFolder:"Supprimer le dossier",emptyDescription:"Déposer un fichier ici pour le téléverser",createFolder:"Créer un dossier",copy:"Copier le lien",size:"Taille",filename:"Nom",serverError:"Action impossible suite a une erreur serveur"},en:ct};let ut=ct;function dt(e){return ut[e]}const ft=Qe([]),pt=(e,t="success")=>{const n=Date.now();ft.update((r=>[{type:t,message:e,id:n},...r])),"success"===t&&window.setTimeout((()=>{ft.update((e=>e.filter((e=>e.id!==n))))}),2e3)},mt=e=>`files/${null!=e?e:""}`,ht=e=>`folders/${null!=e?e:""}`,$t=Qe(null),gt=$t,vt=Qe(""),yt=async(e,t,n,r)=>{try{const l=await e.uploadFile(n,r),o=mt(null==r?void 0:r.id),s=t.getQueryState(o);(null==s?void 0:s.data)&&t.setQueryData(o,(e=>e?[l,...e]:[l]))}catch(e){e instanceof Response&&e.status===it.UnprocessableEntity||(pt(dt("serverError"),"danger"),console.error(e))}},wt=Qe([]),bt=new Map,Ct={push(e){const t=setTimeout((()=>{wt.update((t=>[e,...t]))}),300);bt.set(e,t)},remove(e){const t=bt.get(e);void 0!==t&&(clearTimeout(t),bt.delete(e)),wt.update((t=>t.filter((t=>t!==e))))},subscribe:wt.subscribe};function xt(){return ce("options")}function zt(e,t,n){return t.forEach((t=>{e.addEventListener(t,n)})),()=>{t.forEach((t=>{e.removeEventListener(t,n)}))}}function kt(e){const t=zt(e,["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],(function(e){e.preventDefault(),e.stopPropagation()})),n=zt(e,["dragover","dragenter"],(function(){e.dispatchEvent(new CustomEvent("dropzoneover"))})),r=zt(e,["dragleave","dragend","drop"],(function(){e.dispatchEvent(new CustomEvent("dropzoneleave"))}));return{destroy(){t(),n(),r()}}}function Lt(e){let n,r,l;return{c(){n=H("svg"),r=H("path"),l=H("path"),U(r,"stroke","currentColor"),U(r,"stroke-linecap","round"),U(r,"stroke-width","2"),U(r,"d","M12 12H8m4-4v4-4Zm0 4v4-4Zm0 0h4-4Z"),U(l,"stroke","currentColor"),U(l,"stroke-width","2"),U(l,"d","M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"fill","none"),U(n,"width",e[0]),U(n,"height",e[0]),U(n,"viewBox","0 0 24 24")},m(e,t){q(e,n,t),_(n,r),_(n,l)},p(e,[t]){1&t&&U(n,"width",e[0]),1&t&&U(n,"height",e[0])},i:t,o:t,d(e){e&&j(n)}}}function Et(e,t,n){let{size:r=24}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size)},[r]}class St extends Ne{constructor(e){super(),Te(this,e,Et,Lt,c,{size:0})}}function Ft(e){return e.focus(),{}}function Dt(e){let n,r;return{c(){n=H("svg"),r=H("path"),U(r,"fill","currentColor"),U(r,"fill-rule","evenodd"),U(r,"d","M0 8a1 1 0 0 1 1-1h11.58L8.3 2.7a1 1 0 1 1 1.42-1.4l6 6a1 1 0 0 1 0 1.4l-6 6a1 1 0 0 1-1.42-1.4L12.6 9H1a1 1 0 0 1-1-1Z"),U(r,"clip-rule","evenodd"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"fill","none"),U(n,"viewBox","0 0 16 16"),U(n,"width",e[0]),U(n,"height",e[0])},m(e,t){q(e,n,t),_(n,r)},p(e,[t]){1&t&&U(n,"width",e[0]),1&t&&U(n,"height",e[0])},i:t,o:t,d(e){e&&j(n)}}}function _t(e,t,n){let{size:r=16}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size)},[r]}class Mt extends Ne{constructor(e){super(),Te(this,e,_t,Dt,c,{size:0})}}function Ot(e){let t,n;const l=e[2].default,o=h(l,e,e[1],null);let s=[e[0]],i={};for(let e=0;e<s.length;e+=1)i=r(i,s[e]);return{c(){t=N("button"),o&&o.c(),K(t,i),Y(t,"svelte-ms51de",!0)},m(e,r){q(e,t,r),o&&o.m(t,null),t.autofocus&&t.focus(),n=!0},p(e,[r]){o&&o.p&&(!n||2&r)&&v(o,l,e,e[1],n?g(l,e[1],r,null):y(e[1]),null),K(t,i=Me(s,[1&r&&e[0]])),Y(t,"svelte-ms51de",!0)},i(e){n||(Se(o,e),n=!0)},o(e){Fe(o,e),n=!1},d(e){e&&j(t),o&&o.d(e)}}}function At(e,t,n){let{$$slots:l={},$$scope:o}=t;return e.$$set=e=>{n(0,t=r(r({},t),w(e))),"$$scope"in e&&n(1,o=e.$$scope)},[t=w(t),o,l]}class qt extends Ne{constructor(e){super(),Te(this,e,At,Ot,c,{})}}function jt(e){let t,n;return t=new Mt({props:{size:12}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Tt(e){let t,n;return t=new rt({props:{size:12}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Nt(e){let t,n,r,l;const o=[Tt,jt],s=[];function i(e,t){return e[0].isLoading?0:1}return t=i(e),n=s[t]=o[t](e),{c(){n.c(),r=Q()},m(e,n){s[t].m(e,n),q(e,r,n),l=!0},p(e,l){let c=t;t=i(e),t!==c&&(Le(),Fe(s[c],1,1,(()=>{s[c]=null})),Ee(),n=s[t],n||(n=s[t]=o[t](e),n.c()),Se(n,1),n.m(r.parentNode,r))},i(e){l||(Se(n),l=!0)},o(e){Fe(n),l=!1},d(e){s[t].d(e),e&&j(r)}}}function Ht(e){let t,n,r,l,o,i,c,a,u,d;return n=new st({}),c=new qt({props:{disabled:e[0].isLoading,$$slots:{default:[Nt]},$$scope:{ctx:e}}}),{c(){t=N("form"),Ae(n.$$.fragment),r=P(),l=N("input"),i=P(),Ae(c.$$.fragment),U(l,"type","text"),U(l,"placeholder",dt("newFolderPlaceholder")),U(l,"name","name"),l.required=!0,l.disabled=o=e[0].isLoading,U(l,"class","svelte-bopbht"),U(t,"action",""),U(t,"class","fm-folder-form svelte-bopbht")},m(o,s){q(o,t,s),qe(n,t,null),_(t,r),_(t,l),_(t,i),qe(c,t,null),a=!0,u||(d=[x(Ft.call(null,l)),R(t,"submit",Z(e[2])),x(Ve.call(null,t)),R(t,"outclick",e[3])],u=!0)},p(e,[t]){(!a||1&t&&o!==(o=e[0].isLoading))&&(l.disabled=o);const n={};1&t&&(n.disabled=e[0].isLoading),65&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n)},i(e){a||(Se(n.$$.fragment,e),Se(c.$$.fragment,e),a=!0)},o(e){Fe(n.$$.fragment,e),Fe(c.$$.fragment,e),a=!1},d(e){e&&j(t),je(n),je(c),u=!1,s(d)}}}function Bt(e,t,n){let r,{parent:l}=t;const o=(()=>{const e=et(),t=xt();return We((e=>t.createFolder(e)),{onSuccess(t){const n=n=>{const r=ht(n),l=e.getQueryState(r);(null==l?void 0:l.data)&&e.setQueryData(r,(e=>e?[t,...e]:[t]))};n(t.parent),t.parent&&n(null)}})})();m(e,o,(e=>n(0,r=e)));const s=se();return e.$$set=e=>{"parent"in e&&n(4,l=e.parent)},[r,o,async e=>{const t=new FormData(e.currentTarget).get("name").toString();await r.mutateAsync({name:t,parent:null==l?void 0:l.id}),s("submit")},()=>{s("cancel")},l]}class Pt extends Ne{constructor(e){super(),Te(this,e,Bt,Ht,c,{parent:4})}}function Qt(e,t){let n=null;const r=()=>{if(n)return;const r=e.getBoundingClientRect();n=document.createElement("div"),n.classList.add("fm-tooltip"),n.innerText=t;e.closest(".fm-root").appendChild(n),n.style.setProperty("transform",`translate(calc(${r.left+r.width/2}px - 50%), calc(${r.top-4}px - 100%))`),n.animate([{opacity:0},{opacity:1}],{duration:200,easing:"ease-in-out"}),e.addEventListener("pointerleave",(()=>{n&&(n.animate([{opacity:1},{opacity:0}],{duration:200,easing:"ease-in-out"}),window.setTimeout((()=>{null==n||n.remove(),n=null}),200))}),{once:!0})};return e.addEventListener("pointerenter",r),{destroy(){null==n||n.remove(),e.removeEventListener("pointerenter",r)}}}function Rt(e){let t,n;return t=new st({props:{class:"folder-icon"}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Zt(e){let t,n;return t=new rt({props:{size:20,class:"folder-loader"}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Vt(e){let t,n;return t=new Pt({props:{parent:e[0]}}),t.$on("submit",e[13]),t.$on("cancel",e[13]),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.parent=e[0]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Ut(e){let t,n;return t=new tn({props:{folders:e[6],lazyLoad:e[1]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.folders=e[6]),2&n&&(r.lazyLoad=e[1]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Kt(e){var t;let n,r;return n=new tn({props:{folders:null==(t=e[0])?void 0:t.children,lazyLoad:e[1]}}),{c(){Ae(n.$$.fragment)},m(e,t){qe(n,e,t),r=!0},p(e,t){var r;const l={};1&t&&(l.folders=null==(r=e[0])?void 0:r.children),2&t&&(l.lazyLoad=e[1]),n.$set(l)},i(e){r||(Se(n.$$.fragment,e),r=!0)},o(e){Fe(n.$$.fragment,e),r=!1},d(e){je(n,e)}}}function Jt(e){var n,r;let l,o,i,c,a,u,d,f,p,m,h,$,g,v,y,w,b=(null!=(r=null==(n=e[0])?void 0:n.name)?r:"/")+"";const C=[Zt,Rt],z=[];function k(e,t){return e[2].isLoading?0:1}c=k(e),a=z[c]=C[c](e);let L=!e[8].readOnly&&function(e){let n,r,l,o,i;return r=new St({props:{size:16}}),{c(){n=N("button"),Ae(r.$$.fragment),U(n,"class","fm-new-folder svelte-1nyuu78")},m(t,s){q(t,n,s),qe(r,n,null),l=!0,o||(i=[R(n,"click",Z(e[12])),x(Qt.call(null,n,dt("createFolder")))],o=!0)},p:t,i(e){l||(Se(r.$$.fragment,e),l=!0)},o(e){Fe(r.$$.fragment,e),l=!1},d(e){e&&j(n),je(r),o=!1,s(i)}}}(e),E=e[4]&&Vt(e);const S=[Kt,Ut],F=[];function D(e,t){var n;return(null==(n=e[0])?void 0:n.children)&&e[5]?0:e[6]&&e[5]?1:-1}return~($=D(e))&&(g=F[$]=S[$](e)),{c(){var t,n;l=N("li"),o=N("span"),i=N("span"),a.c(),u=P(),d=N("span"),f=B(b),p=P(),L&&L.c(),m=P(),E&&E.c(),h=P(),g&&g.c(),U(d,"class","fm-folder-name svelte-1nyuu78"),U(i,"class","fm-folder svelte-1nyuu78"),U(o,"class","fm-folder-wrapper svelte-1nyuu78"),Y(o,"active",(null==(t=e[0])?void 0:t.id)===(null==(n=e[7])?void 0:n.id)||e[3])},m(t,n){q(t,l,n),_(l,o),_(o,i),z[c].m(i,null),_(i,u),_(i,d),_(d,f),_(o,p),L&&L.m(o,null),_(l,m),E&&E.m(l,null),_(l,h),~$&&F[$].m(l,null),v=!0,y||(w=[x(kt.call(null,i)),R(i,"click",Z(e[14])),R(i,"dropzoneover",e[9]),R(i,"dropzoneleave",e[10]),R(i,"drop",e[11])],y=!0)},p(e,[t]){var n,r,s,d;let p=c;c=k(e),c!==p&&(Le(),Fe(z[p],1,1,(()=>{z[p]=null})),Ee(),a=z[c],a||(a=z[c]=C[c](e),a.c()),Se(a,1),a.m(i,u)),(!v||1&t)&&b!==(b=(null!=(r=null==(n=e[0])?void 0:n.name)?r:"/")+"")&&W(f,b),e[8].readOnly||L.p(e,t),(!v||137&t)&&Y(o,"active",(null==(s=e[0])?void 0:s.id)===(null==(d=e[7])?void 0:d.id)||e[3]),e[4]?E?(E.p(e,t),16&t&&Se(E,1)):(E=Vt(e),E.c(),Se(E,1),E.m(l,h)):E&&(Le(),Fe(E,1,1,(()=>{E=null})),Ee());let m=$;$=D(e),$===m?~$&&F[$].p(e,t):(g&&(Le(),Fe(F[m],1,1,(()=>{F[m]=null})),Ee()),~$?(g=F[$],g?g.p(e,t):(g=F[$]=S[$](e),g.c()),Se(g,1),g.m(l,null)):g=null)},i(e){v||(Se(a),Se(L),Se(E),Se(g),v=!0)},o(e){Fe(a),Fe(L),Fe(E),Fe(g),v=!1},d(e){e&&j(l),z[c].d(),L&&L.d(),E&&E.d(),~$&&F[$].d(),y=!1,s(w)}}}function Wt(e,t,n){let r,l;m(e,gt,(e=>n(7,l=e)));const o=et();let{folder:s}=t,{lazyLoad:i}=t,c=!1,a=!1,u=!(null==s?void 0:s.id);const d=xt(),f=Je(ht(null==s?void 0:s.id),(()=>d.getFolders((null==s?void 0:s.id)?s:void 0)),{enabled:!(null==s?void 0:s.id)});m(e,f,(e=>n(2,r=e)));let p=null;return e.$$set=e=>{"folder"in e&&n(0,s=e.folder),"lazyLoad"in e&&n(1,i=e.lazyLoad)},e.$$.update=()=>{7&e.$$.dirty&&r.isSuccess&&n(6,p=(i?r.data:function(e){const t=e.map((e=>({...e,children:[]}))),n=t.reduce(((e,t)=>e.set(t.id,t)),new Map);for(const e of t){const t=n.get(e.parent);e.parent&&t&&(t.children=t.children?[...t.children,e]:[e])}return t}(r.data)).filter((e=>{var t,n;return(null!=(t=e.parent)?t:null)===(null!=(n=null==s?void 0:s.id)?n:null)})))},[s,i,r,c,a,u,p,l,d,()=>{d.readOnly||n(3,c=!0)},()=>{d.readOnly||n(3,c=!1)},e=>{d.readOnly&&e.preventDefault(),Array.from(e.dataTransfer.files).forEach((e=>yt(d,o,e,s)))},()=>{n(4,a=!0),n(5,u=!0),r.isSuccess||void 0!==(null==s?void 0:s.children)||r.refetch()},()=>{n(4,a=!1)},()=>{u&&l===s?n(5,u=!1):(n(5,u=!0),C(gt,l=s,l),void 0===(null==s?void 0:s.children)&&r.refetch())},f]}class It extends Ne{constructor(e){super(),Te(this,e,Wt,Jt,c,{folder:0,lazyLoad:1})}}function Yt(e,t,n){const r=e.slice();return r[2]=t[n],r}function Gt(e){let t,n;return t=new It({props:{folder:e[2],lazyLoad:e[1]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.folder=e[2]),2&n&&(r.lazyLoad=e[1]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Xt(e){let t,n,r=e[0],l=[];for(let t=0;t<r.length;t+=1)l[t]=Gt(Yt(e,r,t));const o=e=>Fe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=N("ul");for(let e=0;e<l.length;e+=1)l[e].c();U(t,"class","fm-folders svelte-1spuanm")},m(e,r){q(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);n=!0},p(e,[n]){if(3&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=Yt(e,r,s);l[s]?(l[s].p(o,n),Se(l[s],1)):(l[s]=Gt(o),l[s].c(),Se(l[s],1),l[s].m(t,null))}for(Le(),s=r.length;s<l.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Se(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Fe(l[e]);n=!1},d(e){e&&j(t),T(l,e)}}}function en(e,t,n){let{folders:r}=t,{lazyLoad:l}=t;return e.$$set=e=>{"folders"in e&&n(0,r=e.folders),"lazyLoad"in e&&n(1,l=e.lazyLoad)},[r,l]}class tn extends Ne{constructor(e){super(),Te(this,e,en,Xt,c,{folders:0,lazyLoad:1})}}function nn(e){let n,r,l;return{c(){n=H("svg"),r=H("path"),l=H("path"),U(r,"d","M0 6.417a6.424 6.424 0 006.417 6.416 6.424 6.424 0 006.416-6.416A6.424 6.424 0 006.417 0 6.424 6.424 0 000 6.417zm1.833 0a4.589 4.589 0 014.584-4.584A4.589 4.589 0 0111 6.417 4.589 4.589 0 016.417 11a4.589 4.589 0 01-4.584-4.583z"),U(r,"fill","currentColor"),U(l,"d","M13.75 12.543L11.707 10.5c-.35.452-.755.856-1.207 1.207l2.043 2.043a.851.851 0 001.207 0 .853.853 0 000-1.207z"),U(l,"fill","currentColor"),U(n,"width","14"),U(n,"height","14"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){q(e,n,t),_(n,r),_(n,l)},p:t,i:t,o:t,d(e){e&&j(n)}}}class rn extends Ne{constructor(e){super(),Te(this,e,null,nn,c,{})}}function ln(e){let t,n,r,l,o,s,i,c;return o=new rn({}),{c(){t=N("form"),n=N("input"),r=P(),l=N("button"),Ae(o.$$.fragment),U(n,"type","search"),U(n,"name","search"),U(n,"placeholder","e.g. image.png"),U(n,"class","svelte-15kvubs"),U(l,"title","Search"),U(l,"class","svelte-15kvubs"),U(t,"class","search svelte-15kvubs")},m(a,u){q(a,t,u),_(t,n),I(n,e[0]),_(t,r),_(t,l),qe(o,l,null),s=!0,i||(c=R(n,"input",e[1]),i=!0)},p(e,[t]){1&t&&I(n,e[0])},i(e){s||(Se(o.$$.fragment,e),s=!0)},o(e){Fe(o.$$.fragment,e),s=!1},d(e){e&&j(t),je(o),i=!1,c()}}}function on(e,t,n){let r;return m(e,vt,(e=>n(0,r=e))),gt.subscribe((()=>{C(vt,r="",r)})),[r,function(){r=this.value,vt.set(r)}]}class sn extends Ne{constructor(e){super(),Te(this,e,on,ln,c,{})}}function cn(e){let t,n,r,l,o;return n=new sn({}),l=new tn({props:{folders:[null],lazyLoad:e[0]}}),{c(){t=N("aside"),Ae(n.$$.fragment),r=P(),Ae(l.$$.fragment),U(t,"class","fm-sidebar svelte-jz8ywq")},m(e,s){q(e,t,s),qe(n,t,null),_(t,r),qe(l,t,null),o=!0},p(e,[t]){const n={};1&t&&(n.lazyLoad=e[0]),l.$set(n)},i(e){o||(Se(n.$$.fragment,e),Se(l.$$.fragment,e),o=!0)},o(e){Fe(n.$$.fragment,e),Fe(l.$$.fragment,e),o=!1},d(e){e&&j(t),je(n),je(l)}}}function an(e,t,n){let{lazyFolders:r}=t;return e.$$set=e=>{"lazyFolders"in e&&n(0,r=e.lazyFolders)},[r]}class un extends Ne{constructor(e){super(),Te(this,e,an,cn,c,{lazyFolders:0})}}function dn(e){let n,r,l,o;return{c(){n=H("svg"),r=H("path"),l=H("path"),U(r,"d","M21.12 21.1765L3.83997 21.1765L3.83997 19.7647C3.83997 18.985 3.19526 18.3529 2.39997 18.3529C1.60468 18.3529 0.959966 18.985 0.959966 19.7647L0.959966 22.5882C0.959966 22.9781 1.12114 23.331 1.38173 23.5865C1.64232 23.842 2.00232 24 2.39997 24L22.56 24C22.7541 24 22.9393 23.9623 23.1084 23.894C23.6317 23.6826 24 23.1776 24 22.5882L24 19.7647C24 18.985 23.3553 18.3529 22.56 18.3529C21.7647 18.3529 21.12 18.985 21.12 19.7647L21.12 21.1765Z"),U(r,"fill","currentColor"),U(l,"d","M18.884 10.0314C18.6841 9.93335 18.4636 9.88232 18.2401 9.88232C17.9285 9.88232 17.6253 9.9814 17.3761 10.1647L13.92 12.7159C13.92 12.7125 13.92 12.7092 13.92 12.7059L13.92 1.41176C13.92 1.03734 13.7683 0.67825 13.4983 0.413493C13.2282 0.148736 12.862 -2.98024e-06 12.48 -3.01363e-06C12.0981 -3.04702e-06 11.7319 0.148736 11.4618 0.413493C11.1918 0.67825 11.04 1.03734 11.04 1.41176L11.04 12.7059C11.04 12.7325 11.0408 12.7591 11.0423 12.7855L7.55526 10.3764C7.40048 10.2681 7.22535 10.1909 7.03998 10.1493C6.85461 10.1077 6.66267 10.1025 6.47523 10.134C6.2878 10.1655 6.10858 10.233 5.94794 10.3328C5.78729 10.4326 5.64839 10.5626 5.53926 10.7153C5.32063 11.0207 5.23426 11.3986 5.29902 11.7664C5.36378 12.1341 5.57441 12.4617 5.88485 12.6776L11.6449 16.6588C11.8915 16.8355 12.189 16.9307 12.4945 16.9307C12.7999 16.9307 13.0974 16.8355 13.3441 16.6588L19.1041 12.4235C19.2553 12.3123 19.3828 12.1729 19.4791 12.0134C19.5755 11.8538 19.6388 11.6773 19.6656 11.4937C19.6923 11.3102 19.6819 11.1233 19.635 10.9437C19.5881 10.7641 19.5055 10.5953 19.3921 10.447C19.2579 10.2717 19.084 10.1294 18.884 10.0314Z"),U(l,"fill","currentColor"),U(l,"class",o=b(e[0]?"animatedArrow":null)+" svelte-1k824dx"),U(n,"width","24"),U(n,"height","24"),U(n,"viewBox","0 0 24 24"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){q(e,n,t),_(n,r),_(n,l)},p(e,[t]){1&t&&o!==(o=b(e[0]?"animatedArrow":null)+" svelte-1k824dx")&&U(l,"class",o)},i:t,o:t,d(e){e&&j(n)}}}function fn(e,t,n){let{animated:r}=t;return e.$$set=e=>{"animated"in e&&n(0,r=e.animated)},[r]}class pn extends Ne{constructor(e){super(),Te(this,e,fn,dn,c,{animated:0})}}function mn(e){let t,n,r,l,o,i,c;const a=e[6].default,u=h(a,e,e[5],null);return l=new pn({props:{animated:e[0]}}),{c(){t=N("main"),u&&u.c(),n=P(),r=N("span"),Ae(l.$$.fragment),U(r,"class","fm-dropzone svelte-lkheja"),Y(r,"active",e[0]),U(t,"class","fm-main svelte-lkheja")},m(s,a){q(s,t,a),u&&u.m(t,null),_(t,n),_(t,r),qe(l,r,null),o=!0,i||(c=[x(kt.call(null,t)),R(t,"dropzoneover",e[1]),R(t,"dropzoneleave",e[2]),R(t,"drop",e[4])],i=!0)},p(e,t){u&&u.p&&(!o||32&t)&&v(u,a,e,e[5],o?g(a,e[5],t,null):y(e[5]),null);const n={};1&t&&(n.animated=e[0]),l.$set(n),(!o||1&t)&&Y(r,"active",e[0])},i(e){o||(Se(u,e),Se(l.$$.fragment,e),o=!0)},o(e){Fe(u,e),Fe(l.$$.fragment,e),o=!1},d(e){e&&j(t),u&&u.d(e),je(l),i=!1,s(c)}}}function hn(e){let t,n;const r=e[6].default,l=h(r,e,e[5],null);return{c(){t=N("main"),l&&l.c(),U(t,"class","fm-main svelte-lkheja")},m(e,r){q(e,t,r),l&&l.m(t,null),n=!0},p(e,t){l&&l.p&&(!n||32&t)&&v(l,r,e,e[5],n?g(r,e[5],t,null):y(e[5]),null)},i(e){n||(Se(l,e),n=!0)},o(e){Fe(l,e),n=!1},d(e){e&&j(t),l&&l.d(e)}}}function $n(e){let t,n,r,l;const o=[hn,mn],s=[];return t=e[3].readOnly?0:1,n=s[t]=o[t](e),{c(){n.c(),r=Q()},m(e,n){s[t].m(e,n),q(e,r,n),l=!0},p(e,[t]){n.p(e,t)},i(e){l||(Se(n),l=!0)},o(e){Fe(n),l=!1},d(e){s[t].d(e),e&&j(r)}}}function gn(e,t,n){let r;m(e,gt,(e=>n(7,r=e)));let{$$slots:l={},$$scope:o}=t,s=!1;const i=et(),c=xt();return e.$$set=e=>{"$$scope"in e&&n(5,o=e.$$scope)},[s,()=>n(0,s=!0),()=>n(0,s=!1),c,e=>{Array.from(e.dataTransfer.files).forEach((async e=>{Ct.push(e),await yt(c,i,e,r),Ct.remove(e)}))},o,l]}class vn extends Ne{constructor(e){super(),Te(this,e,gn,$n,c,{})}}function yn(e,t,n){const r=e.slice();return r[1]=t[n],r}function wn(e){let t,n,r=e[0],l=[];for(let t=0;t<r.length;t+=1)l[t]=bn(yn(e,r,t));const o=e=>Fe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=N("aside");for(let e=0;e<l.length;e+=1)l[e].c();U(t,"class","fm-upload-progress svelte-3nncjb")},m(e,r){q(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);n=!0},p(e,n){if(1&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=yn(e,r,s);l[s]?(l[s].p(o,n),Se(l[s],1)):(l[s]=bn(o),l[s].c(),Se(l[s],1),l[s].m(t,null))}for(Le(),s=r.length;s<l.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Se(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Fe(l[e]);n=!1},d(e){e&&j(t),T(l,e)}}}function bn(e){let t,n,r,l,o,s,i,c,a=e[1].name+"";return{c(){t=N("div"),n=N("div"),r=B(a),l=P(),o=N("div"),s=P(),U(o,"class","fm-upload-progress-bar svelte-3nncjb"),U(n,"class","fm-upload-progress-item svelte-3nncjb")},m(e,i){q(e,t,i),_(t,n),_(n,r),_(n,l),_(n,o),_(t,s),c=!0},p(e,t){(!c||1&t)&&a!==(a=e[1].name+"")&&W(r,a)},i(e){c||($e((()=>{i||(i=_e(t,Be,{x:20},!0)),i.run(1)})),c=!0)},o(e){i||(i=_e(t,Be,{x:20},!1)),i.run(0),c=!1},d(e){e&&j(t),e&&i&&i.end()}}}function Cn(e){let t,n,r=e[0].length>0&&wn(e);return{c(){r&&r.c(),t=Q()},m(e,l){r&&r.m(e,l),q(e,t,l),n=!0},p(e,[n]){e[0].length>0?r?(r.p(e,n),1&n&&Se(r,1)):(r=wn(e),r.c(),Se(r,1),r.m(t.parentNode,t)):r&&(Le(),Fe(r,1,1,(()=>{r=null})),Ee())},i(e){n||(Se(r),n=!0)},o(e){Fe(r),n=!1},d(e){r&&r.d(e),e&&j(t)}}}function xn(e,t,n){let r;return m(e,Ct,(e=>n(0,r=e))),[r]}class zn extends Ne{constructor(e){super(),Te(this,e,xn,Cn,c,{})}}function kn(e){let n,r,l;return{c(){n=H("svg"),r=H("rect"),l=H("path"),U(r,"width","16"),U(r,"height","16"),U(r,"fill","white"),U(l,"fill-rule","evenodd"),U(l,"clip-rule","evenodd"),U(l,"d","M1 0H15C15.6 0 16 0.4 16 1V15C16 15.6 15.6 16 15 16H1C0.4 16 0 15.6 0 15V1C0 0.4 0.4 0 1 0ZM10.1 11.5L11.5 10.1L9.4 8L11.5 5.9L10.1 4.5L8 6.6L5.9 4.5L4.5 5.9L6.6 8L4.5 10.1L5.9 11.5L8 9.4L10.1 11.5Z"),U(l,"fill","currentColor"),U(n,"width","16"),U(n,"height","16"),U(n,"viewBox","0 0 16 16"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){q(e,n,t),_(n,r),_(n,l)},p:t,i:t,o:t,d(e){e&&j(n)}}}class Ln extends Ne{constructor(e){super(),Te(this,e,null,kn,c,{})}}function En(e){let n,r,l,o;return{c(){n=H("svg"),r=H("path"),l=H("path"),o=H("path"),U(r,"d","M7 8H1c-.6 0-1 .4-1 1v6c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9c0-.6-.4-1-1-1z"),U(r,"fill","currentColor"),U(l,"d","M11 4H2v2h8v8h2V5c0-.6-.4-1-1-1z"),U(l,"fill","currentColor"),U(o,"d","M15 0H6v2h8v8h2V1c0-.6-.4-1-1-1z"),U(o,"fill","currentColor"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"width",e[0]),U(n,"height",e[0]),U(n,"viewBox","0 0 16 16")},m(e,t){q(e,n,t),_(n,r),_(n,l),_(n,o)},p(e,[t]){1&t&&U(n,"width",e[0]),1&t&&U(n,"height",e[0])},i:t,o:t,d(e){e&&j(n)}}}function Sn(e,t,n){let{size:r=16}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size)},[r]}class Fn extends Ne{constructor(e){super(),Te(this,e,Sn,En,c,{size:0})}}function Dn(e,t){const n=et(),r=xt();return{handleClick:()=>{t.dispatchEvent(new CustomEvent("selectfile",{detail:e,bubbles:!0}))},handleCopy:()=>{navigator.clipboard.writeText(e.url),pt("Le lien a été copié dans votre presse papier")},handleDelete:()=>{confirm(dt("deleteConfirm"))&&(async(e,t,n)=>{const r=mt(n.folder),l=t.getQueryData(r);l&&t.setQueryData(r,(e=>e?e.filter((e=>e.id!==n.id)):[]));try{await e.deleteFile(n)}catch(e){e instanceof Response&&e.status===it.UnprocessableEntity||(pt(dt("serverError"),"danger"),console.error(e)),t.setQueryData(r,l)}})(r,n,e)}}}function _n(e,t){return e.length<=t?e:e.slice(0,t-11)+"..."+e.slice(-8)}function Mn(e){let t,n,r,l,o,c,a,d,f,p,m,h,$,g,v,y,w,b,C,z,k=(e[0].size?e[5].format(e[0].size/1e3):null)+"";y=new Fn({});let L=!e[4].readOnly&&function(e){let t,n,r,l,o;return n=new Ln({}),{c(){t=N("button"),Ae(n.$$.fragment),U(t,"class","svelte-1ntuvox")},m(s,c){q(s,t,c),qe(n,t,null),r=!0,l||(o=[x(Qt.call(null,t,dt("delete"))),R(t,"click",V(Z((function(){i(e[3].handleDelete)&&e[3].handleDelete.apply(this,arguments)}))))],l=!0)},p(t,n){e=t},i(e){r||(Se(n.$$.fragment,e),r=!0)},o(e){Fe(n.$$.fragment,e),r=!1},d(e){e&&j(t),je(n),l=!1,s(o)}}}(e);return{c(){t=N("tr"),n=N("td"),r=P(),l=N("td"),o=N("img"),a=P(),d=N("td"),f=B(e[2]),p=P(),m=N("td"),h=B(k),$=P(),g=N("td"),v=N("button"),Ae(y.$$.fragment),w=P(),L&&L.c(),U(n,"class","svelte-1ntuvox"),u(o.src,c=e[0].thumbnail)||U(o,"src",c),U(o,"alt",""),U(o,"class","svelte-1ntuvox"),U(l,"class","svelte-1ntuvox"),U(d,"class","filename svelte-1ntuvox"),U(m,"class","svelte-1ntuvox"),U(v,"class","svelte-1ntuvox"),U(g,"class","actions svelte-1ntuvox"),U(t,"class","svelte-1ntuvox")},m(s,c){q(s,t,c),_(t,n),_(t,r),_(t,l),_(l,o),_(t,a),_(t,d),_(d,f),_(t,p),_(t,m),_(m,h),_(t,$),_(t,g),_(g,v),qe(y,v,null),_(g,w),L&&L.m(g,null),e[6](t),b=!0,C||(z=[x(Qt.call(null,v,dt("copy"))),R(v,"click",V(Z((function(){i(e[3].handleCopy)&&e[3].handleCopy.apply(this,arguments)})))),R(t,"click",(function(){i(e[3].handleClick)&&e[3].handleClick.apply(this,arguments)}))],C=!0)},p(t,[n]){e=t,(!b||1&n&&!u(o.src,c=e[0].thumbnail))&&U(o,"src",c),(!b||4&n)&&W(f,e[2]),(!b||1&n)&&k!==(k=(e[0].size?e[5].format(e[0].size/1e3):null)+"")&&W(h,k),e[4].readOnly||L.p(e,n)},i(e){b||(Se(y.$$.fragment,e),Se(L),b=!0)},o(e){Fe(y.$$.fragment,e),Fe(L),b=!1},d(n){n&&j(t),je(y),L&&L.d(),e[6](null),C=!1,s(z)}}}function On(e,t,n){let r,l,o;const s=xt(),i=new Intl.NumberFormat(void 0,{style:"unit",unit:"kilobyte",unitDisplay:"short",maximumSignificantDigits:3});let{file:c}=t;return e.$$set=e=>{"file"in e&&n(0,c=e.file)},e.$$.update=()=>{3&e.$$.dirty&&n(3,r=Dn(c,o)),1&e.$$.dirty&&n(2,l=_n(c.name,35))},[c,o,l,r,s,i,function(e){ue[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class An extends Ne{constructor(e){super(),Te(this,e,On,Mn,c,{file:0})}}function qn(e,t,n){const r=e.slice();return r[1]=t[n],r}function jn(e){let t,n;return t=new An({props:{file:e[1]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.file=e[1]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Tn(e){let t,n,r,l,o,s,i,c,a,u,d,f,p,m,h,$=e[0],g=[];for(let t=0;t<$.length;t+=1)g[t]=jn(qn(e,$,t));const v=e=>Fe(g[e],1,1,(()=>{g[e]=null}));return{c(){t=N("table"),n=N("thead"),r=N("tr"),l=N("th"),o=P(),s=N("th"),i=P(),c=N("th"),c.textContent=`${dt("filename")}`,a=P(),u=N("th"),u.textContent=`${dt("size")}`,d=P(),f=N("th"),p=P(),m=N("tbody");for(let e=0;e<g.length;e+=1)g[e].c();U(t,"class","svelte-88gfvn")},m(e,$){q(e,t,$),_(t,n),_(n,r),_(r,l),_(r,o),_(r,s),_(r,i),_(r,c),_(r,a),_(r,u),_(r,d),_(r,f),_(t,p),_(t,m);for(let e=0;e<g.length;e+=1)g[e].m(m,null);h=!0},p(e,[t]){if(1&t){let n;for($=e[0],n=0;n<$.length;n+=1){const r=qn(e,$,n);g[n]?(g[n].p(r,t),Se(g[n],1)):(g[n]=jn(r),g[n].c(),Se(g[n],1),g[n].m(m,null))}for(Le(),n=$.length;n<g.length;n+=1)v(n);Ee()}},i(e){if(!h){for(let e=0;e<$.length;e+=1)Se(g[e]);h=!0}},o(e){g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)Fe(g[e]);h=!1},d(e){e&&j(t),T(g,e)}}}function Nn(e,t,n){let{files:r}=t;return e.$$set=e=>{"files"in e&&n(0,r=e.files)},[r]}class Hn extends Ne{constructor(e){super(),Te(this,e,Nn,Tn,c,{files:0})}}function Bn(e){let t,n,r,l,o,c,a,d,f,p,m,h=!e[4].readOnly&&function(e){let t,n,r,l,o;return n=new Ln({}),{c(){t=N("button"),Ae(n.$$.fragment),U(t,"class","fm-delete svelte-c91skb")},m(s,c){q(s,t,c),qe(n,t,null),r=!0,l||(o=[x(Qt.call(null,t,dt("delete"))),R(t,"click",V(Z((function(){i(e[2].handleDelete)&&e[2].handleDelete.apply(this,arguments)}))))],l=!0)},p(t,n){e=t},i(e){r||(Se(n.$$.fragment,e),r=!0)},o(e){Fe(n.$$.fragment,e),r=!1},d(e){e&&j(t),je(n),l=!1,s(o)}}}(e);return{c(){t=N("div"),n=N("div"),r=N("img"),o=P(),h&&h.c(),c=P(),a=N("div"),d=B(e[3]),u(r.src,l=e[0].thumbnail)||U(r,"src",l),U(r,"alt",""),U(r,"class","svelte-c91skb"),U(n,"class","fm-thumbnail svelte-c91skb"),U(a,"class","fm-filename svelte-c91skb"),U(t,"class","fm-file svelte-c91skb")},m(l,s){q(l,t,s),_(t,n),_(n,r),_(n,o),h&&h.m(n,null),_(t,c),_(t,a),_(a,d),e[5](t),f=!0,p||(m=R(t,"click",(function(){i(e[2].handleClick)&&e[2].handleClick.apply(this,arguments)})),p=!0)},p(t,[n]){e=t,(!f||1&n&&!u(r.src,l=e[0].thumbnail))&&U(r,"src",l),e[4].readOnly||h.p(e,n),(!f||8&n)&&W(d,e[3])},i(e){f||(Se(h),f=!0)},o(e){Fe(h),f=!1},d(n){n&&j(t),h&&h.d(),e[5](null),p=!1,m()}}}function Pn(e,t,n){let r,l,o;const s=xt();let{file:i}=t;var c;return c=()=>{s.renderFileCell(i,l)&&o.replaceWith(s.renderFileCell(i,l))},oe().$$.on_mount.push(c),e.$$set=e=>{"file"in e&&n(0,i=e.file)},e.$$.update=()=>{1&e.$$.dirty&&n(3,r=_n(i.name,30)),3&e.$$.dirty&&n(2,l=Dn(i,o))},[i,o,l,r,s,function(e){ue[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class Qn extends Ne{constructor(e){super(),Te(this,e,Pn,Bn,c,{file:0})}}function Rn(e,t,n){const r=e.slice();return r[1]=t[n],r}function Zn(e){let t,n;return t=new Qn({props:{file:e[1]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.file=e[1]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Vn(e){let t,n,r=e[0],l=[];for(let t=0;t<r.length;t+=1)l[t]=Zn(Rn(e,r,t));const o=e=>Fe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=N("div");for(let e=0;e<l.length;e+=1)l[e].c();U(t,"class","grid svelte-trks37")},m(e,r){q(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);n=!0},p(e,[n]){if(1&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=Rn(e,r,s);l[s]?(l[s].p(o,n),Se(l[s],1)):(l[s]=Zn(o),l[s].c(),Se(l[s],1),l[s].m(t,null))}for(Le(),s=r.length;s<l.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Se(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Fe(l[e]);n=!1},d(e){e&&j(t),T(l,e)}}}function Un(e,t,n){let{files:r}=t;return e.$$set=e=>{"files"in e&&n(0,r=e.files)},[r]}class Kn extends Ne{constructor(e){super(),Te(this,e,Un,Vn,c,{files:0})}}function Jn(e){let t,n,r,l,o,s,i=e[3]&&!e[5].readOnly&&Yn(e);return{c(){t=N("div"),n=N("p"),n.textContent=`${dt("emptyTitle")}`,r=P(),l=N("p"),l.textContent=`${dt("emptyDescription")}`,o=P(),i&&i.c(),U(n,"class","big svelte-mbr02"),U(l,"class","svelte-mbr02"),U(t,"class","empty svelte-mbr02")},m(e,c){q(e,t,c),_(t,n),_(t,r),_(t,l),_(t,o),i&&i.m(t,null),s=!0},p(e,n){e[3]&&!e[5].readOnly?i?(i.p(e,n),8&n&&Se(i,1)):(i=Yn(e),i.c(),Se(i,1),i.m(t,null)):i&&(Le(),Fe(i,1,1,(()=>{i=null})),Ee())},i(e){s||(Se(i),s=!0)},o(e){Fe(i),s=!1},d(e){e&&j(t),i&&i.d()}}}function Wn(e){let n,r,l;return r=new rt({}),{c(){n=N("div"),Ae(r.$$.fragment),U(n,"class","empty svelte-mbr02")},m(e,t){q(e,n,t),qe(r,n,null),l=!0},p:t,i(e){l||(Se(r.$$.fragment,e),l=!0)},o(e){Fe(r.$$.fragment,e),l=!1},d(e){e&&j(n),je(r)}}}function In(e){let t,n,r,l;const o=[er,Xn],s=[];function i(e,t){return"rows"===e[0]?0:1}return t=i(e),n=s[t]=o[t](e),{c(){n.c(),r=Q()},m(e,n){s[t].m(e,n),q(e,r,n),l=!0},p(e,l){let c=t;t=i(e),t===c?s[t].p(e,l):(Le(),Fe(s[c],1,1,(()=>{s[c]=null})),Ee(),n=s[t],n?n.p(e,l):(n=s[t]=o[t](e),n.c()),Se(n,1),n.m(r.parentNode,r))},i(e){l||(Se(n),l=!0)},o(e){Fe(n),l=!1},d(e){s[t].d(e),e&&j(r)}}}function Yn(e){let t,n,r,l,o,s,i,c=dt("deleteFolder")+"",a=e[4].isLoading&&Gn();return{c(){t=N("button"),a&&a.c(),n=P(),r=B(c),U(t,"class","delete-folder svelte-mbr02"),t.disabled=l=e[4].isLoading},m(l,c){q(l,t,c),a&&a.m(t,null),_(t,n),_(t,r),o=!0,s||(i=R(t,"click",Z(e[7])),s=!0)},p(e,r){e[4].isLoading?a?16&r&&Se(a,1):(a=Gn(),a.c(),Se(a,1),a.m(t,n)):a&&(Le(),Fe(a,1,1,(()=>{a=null})),Ee()),(!o||16&r&&l!==(l=e[4].isLoading))&&(t.disabled=l)},i(e){o||(Se(a),o=!0)},o(e){Fe(a),o=!1},d(e){e&&j(t),a&&a.d(),s=!1,i()}}}function Gn(e){let t,n;return t=new rt({props:{size:12}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Xn(e){let t,n;return t=new Kn({props:{files:e[2]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.files=e[2]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function er(e){let t,n;return t=new Hn({props:{files:e[2]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.files=e[2]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function tr(e){let t,n,r,l;const o=[In,Wn,Jn],s=[];function i(e,t){return e[2].length>0?0:e[1].isLoading?1:2}return t=i(e),n=s[t]=o[t](e),{c(){n.c(),r=Q()},m(e,n){s[t].m(e,n),q(e,r,n),l=!0},p(e,[l]){let c=t;t=i(e),t===c?s[t].p(e,l):(Le(),Fe(s[c],1,1,(()=>{s[c]=null})),Ee(),n=s[t],n?n.p(e,l):(n=s[t]=o[t](e),n.c()),Se(n,1),n.m(r.parentNode,r))},i(e){l||(Se(n),l=!0)},o(e){Fe(n),l=!1},d(e){s[t].d(e),e&&j(r)}}}function nr(e,t,n){let r,l,o,s,i;m(e,vt,(e=>n(12,s=e)));let{layout:c}=t,{folder:a}=t;const u=xt(),d=(()=>{const e=et(),t=xt();return We((e=>t.deleteFolder(e).then((t=>e))),{onSuccess:t=>{$t.update((()=>null));const n=n=>{const r=ht(n),l=e.getQueryState(r);(null==l?void 0:l.data)&&e.setQueryData(ht(n),(e=>e?e.filter((e=>e.id!==t.id)):[]))};n(t.parent),n()}})})();m(e,d,(e=>n(4,i=e)));const f=Je(mt(null==a?void 0:a.id),(()=>xt().getFiles(a)));m(e,f,(e=>n(1,l=e)));let p=[];const h=Je(ht(null==a?void 0:a.id),(()=>[]),{enabled:!1});return m(e,h,(e=>n(11,o=e))),e.$$set=e=>{"layout"in e&&n(0,c=e.layout),"folder"in e&&n(10,a=e.folder)},e.$$.update=()=>{var t,i;4098&e.$$.dirty&&n(2,p=l.isSuccess?l.data.filter((e=>!s||e.name.includes(s))):[]),3074&e.$$.dirty&&n(3,r=(null==a?void 0:a.id)&&((null==a?void 0:a.children)&&0===a.children.length||o.isSuccess&&0===(null==(t=null==o?void 0:o.data)?void 0:t.length))&&l.isSuccess&&0===(null==(i=null==l?void 0:l.data)?void 0:i.length))},[c,l,p,r,i,u,d,()=>{a&&i.mutate(a)},f,h,a,o,s]}class rr extends Ne{constructor(e){super(),Te(this,e,nr,tr,c,{layout:0,folder:10})}}function lr(e){let n,r,l;return{c(){n=H("svg"),r=H("path"),l=H("path"),U(r,"stroke","currentColor"),U(r,"stroke-width","2"),U(r,"d","M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z"),U(l,"stroke","currentColor"),U(l,"stroke-linecap","round"),U(l,"stroke-width","2"),U(l,"d","M12 16.5v.5m0-10v6-6Z"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"fill","none"),U(n,"viewBox","0 0 24 24"),U(n,"width",e[0]),U(n,"height",e[0])},m(e,t){q(e,n,t),_(n,r),_(n,l)},p(e,[t]){1&t&&U(n,"width",e[0]),1&t&&U(n,"height",e[0])},i:t,o:t,d(e){e&&j(n)}}}function or(e,t,n){let{size:r=24}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size)},[r]}class sr extends Ne{constructor(e){super(),Te(this,e,or,lr,c,{size:0})}}function ir(e){let n,r,l;return{c(){n=H("svg"),r=H("path"),l=H("path"),U(r,"stroke","currentColor"),U(r,"stroke-linecap","round"),U(r,"stroke-linejoin","round"),U(r,"stroke-width","2"),U(r,"d","m8 12.5 3 3 5-6"),U(l,"stroke","currentColor"),U(l,"stroke-width","2"),U(l,"d","M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"fill","none"),U(n,"viewBox","0 0 24 24"),U(n,"width",e[0]),U(n,"height",e[0])},m(e,t){q(e,n,t),_(n,r),_(n,l)},p(e,[t]){1&t&&U(n,"width",e[0]),1&t&&U(n,"height",e[0])},i:t,o:t,d(e){e&&j(n)}}}function cr(e,t,n){let{size:r=24}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size)},[r]}class ar extends Ne{constructor(e){super(),Te(this,e,cr,ir,c,{size:0})}}function ur(e){let t,n,r,l;return t=new ar({}),{c(){Ae(t.$$.fragment),n=P(),r=N("div"),U(r,"class","fm-progress svelte-rcwbts")},m(e,o){qe(t,e,o),q(e,n,o),q(e,r,o),l=!0},i(e){l||(Se(t.$$.fragment,e),l=!0)},o(e){Fe(t.$$.fragment,e),l=!1},d(e){je(t,e),e&&j(n),e&&j(r)}}}function dr(e){let t,n;return t=new sr({}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function fr(e){let t,n,r,l,o,s,i,c,a,u,d=e[0].message+"";const f=[dr,ur],p=[];function m(e,t){return"danger"===e[0].type?0:"success"===e[0].type?1:-1}return~(n=m(e))&&(r=p[n]=f[n](e)),{c(){t=N("div"),r&&r.c(),l=P(),o=B(d),s=P(),i=N("button"),i.textContent="×",U(i,"class","fm-close svelte-rcwbts"),U(t,"class","fm-alert svelte-rcwbts"),Y(t,"fm-danger","danger"===e[0].type),Y(t,"fm-success","success"===e[0].type)},m(r,d){q(r,t,d),~n&&p[n].m(t,null),_(t,l),_(t,o),_(t,s),_(t,i),c=!0,a||(u=R(i,"click",Z(e[1])),a=!0)},p(e,[s]){let i=n;n=m(e),n!==i&&(r&&(Le(),Fe(p[i],1,1,(()=>{p[i]=null})),Ee()),~n?(r=p[n],r||(r=p[n]=f[n](e),r.c()),Se(r,1),r.m(t,l)):r=null),(!c||1&s)&&d!==(d=e[0].message+"")&&W(o,d),(!c||1&s)&&Y(t,"fm-danger","danger"===e[0].type),(!c||1&s)&&Y(t,"fm-success","success"===e[0].type)},i(e){c||(Se(r),c=!0)},o(e){Fe(r),c=!1},d(e){e&&j(t),~n&&p[n].d(),a=!1,u()}}}function pr(e,t,n){let{message:r}=t;return e.$$set=e=>{"message"in e&&n(0,r=e.message)},[r,()=>{var e;e=r.id,ft.update((t=>t.filter((t=>t.id!==e))))}]}class mr extends Ne{constructor(e){super(),Te(this,e,pr,fr,c,{message:0})}}function hr(e,t,n){const r=e.slice();return r[1]=t[n],r}function $r(e){let t,n,r,l,o;return n=new mr({props:{message:e[1]}}),{c(){t=N("div"),Ae(n.$$.fragment),r=P()},m(e,l){q(e,t,l),qe(n,t,null),_(t,r),o=!0},p(e,t){const r={};1&t&&(r.message=e[1]),n.$set(r)},i(e){o||(Se(n.$$.fragment,e),$e((()=>{l||(l=_e(t,Be,{x:20},!0)),l.run(1)})),o=!0)},o(e){Fe(n.$$.fragment,e),l||(l=_e(t,Be,{x:20},!1)),l.run(0),o=!1},d(e){e&&j(t),je(n),e&&l&&l.end()}}}function gr(e){let t,n,r=e[0],l=[];for(let t=0;t<r.length;t+=1)l[t]=$r(hr(e,r,t));const o=e=>Fe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=N("div");for(let e=0;e<l.length;e+=1)l[e].c();U(t,"class","fm-wrapper svelte-1ja1s61")},m(e,r){q(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);n=!0},p(e,[n]){if(1&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=hr(e,r,s);l[s]?(l[s].p(o,n),Se(l[s],1)):(l[s]=$r(o),l[s].c(),Se(l[s],1),l[s].m(t,null))}for(Le(),s=r.length;s<l.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Se(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Fe(l[e]);n=!1},d(e){e&&j(t),T(l,e)}}}function vr(e,t,n){let r;return m(e,ft,(e=>n(0,r=e))),[r]}class yr extends Ne{constructor(e){super(),Te(this,e,vr,gr,c,{})}}function wr(e){let t,n,r,l,o,s,i,c,a,u,d,f,p,m,h;return l=new un({props:{lazyFolders:e[2]}}),s=new vn({props:{$$slots:{default:[Cr]},$$scope:{ctx:e}}}),c=new yr({}),u=new zn({}),{c(){t=N("div"),n=N("div"),r=N("div"),Ae(l.$$.fragment),o=P(),Ae(s.$$.fragment),i=P(),Ae(c.$$.fragment),a=P(),Ae(u.$$.fragment),U(r,"class","fm-modal svelte-5hhtx0"),U(n,"class","fm-overlay svelte-5hhtx0"),U(t,"class","fm-root svelte-5hhtx0")},m(e,d){q(e,t,d),_(t,n),_(n,r),qe(l,r,null),_(r,o),qe(s,r,null),_(r,i),qe(c,r,null),_(r,a),qe(u,r,null),p=!0,m||(h=x(Ve.call(null,r,"close")),m=!0)},p(e,t){const n={};4&t&&(n.lazyFolders=e[2]),l.$set(n);const r={};74&t&&(r.$$scope={dirty:t,ctx:e}),s.$set(r)},i(e){p||(Se(l.$$.fragment,e),Se(s.$$.fragment,e),Se(c.$$.fragment,e),Se(u.$$.fragment,e),$e((()=>{d||(d=_e(r,Be,{y:-30,duration:500},!0)),d.run(1)})),$e((()=>{f||(f=_e(n,Be,{duration:300},!0)),f.run(1)})),p=!0)},o(e){Fe(l.$$.fragment,e),Fe(s.$$.fragment,e),Fe(c.$$.fragment,e),Fe(u.$$.fragment,e),d||(d=_e(r,Be,{y:-30,duration:500},!1)),d.run(0),f||(f=_e(n,Be,{duration:300},!1)),f.run(0),p=!1},d(e){e&&j(t),je(l),je(s),je(c),je(u),e&&d&&d.end(),e&&f&&f.end(),m=!1,h()}}}function br(e){let t,n;return t=new rr({props:{folder:e[3],layout:e[1]}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.folder=e[3]),2&n&&(r.layout=e[1]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Cr(e){var n;let r,l,o=null==(n=e[3])?void 0:n.id,s=br(e);return{c(){s.c(),r=Q()},m(e,t){s.m(e,t),q(e,r,t),l=!0},p(e,n){var l;8&n&&c(o,o=null==(l=e[3])?void 0:l.id)?(Le(),Fe(s,1,1,t),Ee(),s=br(e),s.c(),Se(s,1),s.m(r.parentNode,r)):s.p(e,n)},i(e){l||(Se(s),l=!0)},o(e){Fe(s),l=!1},d(e){e&&j(r),s.d(e)}}}function xr(e){let t,n,r=!e[0]&&wr(e);return{c(){r&&r.c(),t=Q()},m(e,l){r&&r.m(e,l),q(e,t,l),n=!0},p(e,n){e[0]?r&&(Le(),Fe(r,1,1,(()=>{r=null})),Ee()):r?(r.p(e,n),1&n&&Se(r,1)):(r=wr(e),r.c(),Se(r,1),r.m(t.parentNode,t))},i(e){n||(Se(r),n=!0)},o(e){Fe(r),n=!1},d(e){r&&r.d(e),e&&j(t)}}}function zr(e){let t,n;return t=new Ge({props:{client:e[4],$$slots:{default:[xr]},$$scope:{ctx:e}}}),{c(){Ae(t.$$.fragment)},m(e,r){qe(t,e,r),n=!0},p(e,[n]){const r={};79&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function kr(e,t,n){let r;m(e,gt,(e=>n(3,r=e)));let{hidden:l}=t,{layout:o}=t,{lazyFolders:s}=t,{options:i}=t;ie("options",i);const c=new Ke;return e.$$set=e=>{"hidden"in e&&n(0,l=e.hidden),"layout"in e&&n(1,o=e.layout),"lazyFolders"in e&&n(2,s=e.lazyFolders),"options"in e&&n(5,i=e.options)},[l,o,s,r,c,i]}class Lr extends Ne{constructor(e){super(),Te(this,e,kr,zr,c,{hidden:0,layout:1,lazyFolders:2,options:5})}}function Er(e,t,n){const r={...n};let l=new URL((e.startsWith("/")?window.location.origin:"")+e);return l.pathname=("/"===l.pathname?"":l.pathname)+t,r.credentials="include",r.headers={...r.headers},r.headers.Accept="application/json",r.json&&(r.body=JSON.stringify(r.json),r.headers["Content-Type"]="application/json"),r.query&&function(e,t){const n=t||new URLSearchParams;Object.keys(e).filter((t=>void 0!==e[t])).forEach((t=>n.set(t,e[t])))}(r.query,l.searchParams),r.params&&Object.keys(r.params).forEach((e=>l.pathname=l.pathname.replace(`%7B${e}%7D`,r.params[e]))),fetch(l.toString(),r).then((e=>{if(e.status===it.NoContent)return null;if(e.status>=it.OK&&e.status<it.MultipleChoices)return e.json();throw e.json().then((e=>{(null==e?void 0:e.message)?pt(e.message,"danger"):pt(dt("serverError"),"danger")})).catch((()=>pt(dt("serverError"),"danger"))),e}))}const Sr={endpoint:"",readOnly:!1,httpHeaders:{},getFolders(e){var t;return Er(this.endpoint,"/folders",{query:{parent:null==(t=null==e?void 0:e.id)?void 0:t.toString()},headers:this.httpHeaders})},createFolder(e){return Er(this.endpoint,"/folders",{method:"post",headers:this.httpHeaders,json:e})},deleteFolder(e){return Er(this.endpoint,"/folders/{id}",{method:"delete",headers:this.httpHeaders,params:{id:e.id.toString()}})},getFiles(e){return Er(this.endpoint,"/files",{headers:this.httpHeaders,query:{folder:(null==e?void 0:e.id)?e.id.toString():void 0}})},uploadFile(e,t){const n=new FormData;return n.set("file",e),(null==t?void 0:t.id)&&n.set("folder",t.id.toString()),Er(this.endpoint,"/files",{method:"post",headers:this.httpHeaders,body:n})},deleteFile(e){return Er(this.endpoint,"/files/{id}",{method:"delete",headers:this.httpHeaders,params:{id:e.id.toString()}})},renderFileCell:(e,t)=>null},Fr=class{constructor(e,t={}){Ze(this,"fm",null),Ze(this,"options"),this.element=e,this.options={...Sr,...t}}static get observedAttributes(){return["hidden","endpoint"]}connectedCallback(){this.element.style.setProperty("display","block");const e=this.element.getAttribute("endpoint");if(e&&(this.options.endpoint=e),this.options.readOnly=this.element.hasAttribute("readonly"),!this.options.endpoint&&!this.options.getFiles)throw new Error("You must define an endpoint for this custom element");var t;t=document.documentElement.getAttribute("lang")||"en",ut=t in at?at[t]:ct,this.fm=new Lr({target:this.element,props:{hidden:this.element.hidden,layout:this.element.getAttribute("layout")||"grid",lazyFolders:this.element.hasAttribute("lazy-folders"),options:this.options}})}attributeChangedCallback(e,t,n){"hidden"===e&&this.fm&&this.fm.$set({hidden:null!==n}),"endpoint"===e&&(this.options.endpoint=n)}disconnectedCallback(){var e;null==(e=null==this?void 0:this.fm)||e.$destroy()}static register(e="file-manager",t){if(!this.registered.has(e)){class n extends HTMLElement{constructor(){super(),Ze(this,"decorated"),this.decorated=new Fr(this,t)}static get observedAttributes(){return Fr.observedAttributes}connectedCallback(){return this.decorated.connectedCallback()}attributeChangedCallback(e,t,n){return this.decorated.attributeChangedCallback(e,t,n)}}customElements.define(e,n),this.registered.set(e,!0)}}};let Dr=Fr;Ze(Dr,"registered",new Map),Dr.register("file-manager",{renderFileCell(e,t){console.log("test",e);const n=document.querySelector("#FileCell");if(n){let r=n.content.cloneNode(!0);const l=r.querySelector(".fm-file"),o=r.querySelector(".fm-thumbnail img"),s=r.querySelector(".fm-delete"),i=r.querySelector(".fm-alt");return i.value=e?.alt,o.setAttribute("src",e?.url),s.addEventListener("click",(e=>{e.preventDefault(),console.log(t)})),l.addEventListener("click",(e=>{e.preventDefault(),t.handleClick()})),i.addEventListener("change",(t=>{t.preventDefault();const n=new Headers,r=new Request("/api/file-manager/files",{method:"PATCH",headers:n,mode:"cors",cache:"default",body:JSON.stringify({...e,alt:i.value})});fetch(r).then((e=>e.json())).then((t=>e=t))})),r}return null}});const _r=document.querySelector("file-manager");_r.addEventListener("close",(e=>{e.currentTarget.setAttribute("hidden","")})),_r.addEventListener("selectfile",(e=>{console.log("fileselect",e.detail)})),document.querySelector("*[data-toggle-fm]").addEventListener("click",(()=>{_r.removeAttribute("hidden")}))})();
//# sourceMappingURL=app.js.map
